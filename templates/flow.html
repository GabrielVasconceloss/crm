{% extends 'index.html' %}

{% block title %}
    <title>Gabriel - Flow</title>
{% endblock %}

{% block cont %}
    <div class="container-fluid background-image">
        <div class="d-flex justify-content-between align-items-center m-2">
            <h2 class="text-white">Opportunity Kanban</h2>
            <a href="{% url 'opportunity_list' %}" class="btn btn-primary text-decoration-none"><span>List</span></a>
            <a href="{% url 'add_status' %}" class="btn btn-success text-decoration-none"><span>Create Status</span></a>
        </div>
        <div class="kanban-board">
            {% for Status in status_list %}
                <div class="column" >
                    <div class="column-title" style="border-bottom: {{ Status.title_color }} solid 2px;">
                        <h5 style="color: {{ Status.text_color }}">{{ Status.title }}</h5>
                        <a href="#"><i class="bi bi-three-dots m-2 column-btn" aria-hidden="true"></i></a>
                    </div>
                    <div class="column-body">
                        {% for opportunity in opportunities_list %}
                            {% if opportunity.status == Status %}
                                    <div class="column-card">
                                        <strong>{{ opportunity.opportunity_name }}</strong><br>
                                        <div class="column-card-span">
                                            <span>{{ opportunity.customer.first_name }} {{ opportunity.customer.last_name }}</span>
                                        </div>
                                    </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>


{% endblock %}

